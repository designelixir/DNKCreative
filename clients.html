<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Description of the page">
    <meta name="keywords" content="comma separated">
    <meta name="author" content="Design Elixir Studio | Megan Byers">
    <title>DNK Creative | Clients</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="fonts.css">
    <link rel="preload" href="assets/fonts/SFProDisplay-BlackItalic.woff2" as="font" type="font/woff2" crossorigin>
    <script src="scripts/index.js"></script>
    <script src="scripts/clientList.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
</head>

<body class="flex-center-center flex-column white-bg">
    <header-component data-nav="Clients" data-style="black" id="navigation"></header-component>
    <main>
        <section>
            <div class="basic-padding">
                <h1>Clients</h1>
            </div>
            <div class="clients-container basic-padding">
                <div class="clients-list flex-center-start flex-wrap" id="clients-list">
                    <!-- Client cards will be generated here -->
                </div>
            </div>
        </section>
    </main>
    <footer-component></footer-component>

    <script>
        const clientsListElement = document.getElementById('clients-list');
        let expandedCard = null;

        clientList.forEach((client, index) => {
            const clientCard = `
                <div id="client-${index}" class="client-card flex-center-center no-flex-grow" onclick="expandClient('client-${index}')">
                    <div class="client-logo-container" style="background-image: url('${client.logo}')">
                        <h2>${client.name}</h2>
                    </div>
                    <div class="client-logo-container-overlay basic-padding" style=" opacity: 0;">
                        <div class="client-logo-container" style="background-image: url('${client.logo}')">
                            <h2>${client.name}</h2>
                        </div>
                        <br>
                        <p>${client.description}</p>
                        <div class="flex-center-start tags-list flex-wrap">
                            ${client.services.map(service => `<h6>${service}</h6>`).join('')}
                        </div>
                    </div>
                </div>
            `;
            clientsListElement.innerHTML += clientCard;
        });

        function expandClient(clientId) {
            const clientCard = document.getElementById(clientId);
            const overlay = clientCard.querySelector('.client-logo-container-overlay');
            const otherCards = document.querySelectorAll('.client-card');

            if (expandedCard && expandedCard !== clientCard) {
                collapseCard(expandedCard);
            }

            if (parseFloat(overlay.style.opacity) === 0) {
                expandedCard = clientCard;

                gsap.to(overlay, {
                    opacity: 1,
                    duration: 0.5,
                    ease: 'power2.out',
                    onComplete: () => {
                        const overlayBounds = overlay.getBoundingClientRect();
                        const targetWidth = window.innerWidth * 0.8;
                        const targetHeight = window.innerHeight * 0.8;

                        // Calculate the target top position relative to the viewport and account for scrolling
                        const scrollY = window.scrollY || window.pageYOffset;
                        const targetTop = scrollY - (window.innerHeight * 0.25);

                        // Animate the expansion of the overlay using width, height, and translations
                        gsap.to(overlay, {
                            duration: 0.8,
                            ease: "power2.inOut",
                            width: targetWidth,
                            height: targetHeight,
                            position: "fixed",
                            top: targetTop + 'px',
                            left: '10vw',
                            zIndex: 1000,
                        });
                    }
                });

                otherCards.forEach(card => {
                    if (card !== clientCard) {
                        gsap.to(card, {
                            opacity: 0.5,
                            duration: 0.5,
                            ease: 'power2.out'
                        });
                    }
                });
            } else {
                collapseCard(clientCard);
                expandedCard = null;
            }
        }

        function collapseCard(clientCard) {
            const overlay = clientCard.querySelector('.client-logo-container-overlay');
            const otherCards = document.querySelectorAll('.client-card');

            gsap.to(overlay, {
                opacity: 0,
                duration: 0.5,
                ease: 'power2.inOut',
                width: "100%",
                height: "100%",
                x: 0,
                y: 0,
                position: "absolute",
                zIndex: 1,
            });

            otherCards.forEach(card => {
                gsap.to(card, {
                    opacity: 1,
                    duration: 0.5,
                    ease: 'power2.out'
                });
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            const overlays = document.querySelectorAll('.client-logo-container-overlay');

            overlays.forEach(overlay => {
                overlay.style.opacity = 0;
            });
        });
    </script>
</body>

</html>
